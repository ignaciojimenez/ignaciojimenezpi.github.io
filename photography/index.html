<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ignacio Jiménez Pi - Film Photography</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-white text-gray-900">
    <!-- Navigation -->
    <nav class="fixed w-full bg-white/90 backdrop-blur-sm z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="/" class="text-xl font-light tracking-wide">IGNACIO JIMÉNEZ PI</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Album Grid -->
    <div class="pt-16 px-4 md:px-8">
        <div class="gallery-grid" id="albumGrid">
            <!-- Album covers will be loaded here -->
        </div>
    </div>

    <script>
        const albumGrid = document.getElementById('albumGrid');

        // Load albums data
        fetch('albums/albums.json')
            .then(response => response.json())
            .then(data => {
                // Sort albums by date (newest first)
                data.albums.sort((a, b) => new Date(b.date) - new Date(a.date));
                renderAlbums(data.albums);
            });

        function renderAlbums(albums) {
            albums.forEach(album => {
                const card = document.createElement('div');
                card.className = 'gallery-item relative group cursor-pointer';
                
                const container = document.createElement('div');
                container.className = 'image-container relative';
                
                const img = document.createElement('img');
                img.src = album.coverImage;
                img.alt = album.title;
                img.loading = 'lazy';
                img.className = 'w-full h-full object-cover';
                
                // Add onload handler to show the image
                img.onload = () => {
                    card.classList.add('loaded');
                };
                
                const overlay = document.createElement('div');
                overlay.className = 'absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-60 transition-opacity duration-300 flex items-center justify-center';
                
                const content = document.createElement('div');
                content.className = 'text-white text-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 p-4';
                
                // Format the date
                const dateStr = album.date ? new Date(album.date).toLocaleDateString('en-US', { 
                    year: 'numeric',
                    month: 'long'
                }) : '';
                
                content.innerHTML = `
                    <h3 class="text-xl font-semibold mb-2">${album.title}</h3>
                    ${dateStr ? `<p class="text-sm mb-2">${dateStr}</p>` : ''}
                    <p class="text-sm">${album.description || ''}</p>
                `;
                
                overlay.appendChild(content);
                container.appendChild(img);
                container.appendChild(overlay);
                card.appendChild(container);
                
                card.onclick = () => window.location.href = `albums/${album.id}`;
                albumGrid.appendChild(card);
            });
        }
    </script>
</body>
</html>