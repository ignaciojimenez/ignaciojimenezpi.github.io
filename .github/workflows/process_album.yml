name: Process New Album
on:
  workflow_dispatch:
    inputs:
      album_name:
        description: 'Name of the album'
        required: true
        type: string
      test_mode:
        description: 'Run in test mode with sample images'
        required: false
        type: boolean
        default: true

jobs:
  test_environment:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          ref: photography-automation
      
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
          
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install pillow jsonschema
          
      - name: List workspace contents
        run: |
          echo "Repository structure:"
          ls -R photography/
          
      - name: Test Python environment
        run: |
          python -c "from PIL import Image; print('Pillow version:', Image.__version__)"
          python -c "import jsonschema; print('jsonschema version:', jsonschema.__version__)"
          
      - name: Verify utils scripts
        run: |
          echo "Utils directory contents:"
          ls -l photography/utils/
          
      - name: Show current branch
        run: |
          echo "Current branch:"
          git branch --show-current
